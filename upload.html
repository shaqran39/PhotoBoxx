<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>


    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
            background-color: black;
            color: aliceblue;
        }

        main {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        main>img {
            height: 200px;
            margin: 5px;
        }
    </style>
</head>






<body>
    <h1>Upload Image</h1>
    <input type="file" id="inpBilde">
    <main id="main">
        <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase.js"></script>



        <script>
        // Your web app's Firebase configuration
        var Config = {
          apiKey: "AIzaSyCNwuHNu_BfFiHiXM93WLoAKUiZNhQGAqs",
          authDomain: "photobox-2861c.firebaseapp.com",
          databaseURL: "https://photobox-2861c.firebaseio.com",
          projectId: "photobox-2861c",
          storageBucket: "photobox-2861c.appspot.com",
          messagingSenderId: "260905480237",
          appId: "1:260905480237:web:bb66731094463aa68e48a4",
          measurementId: "G-EW2THT9VYB"
        };
        firebase.initializeApp(Config);

            let database = firebase.database();
            let storage = firebase.storage();

            let inpBilde = document.getElementById("inpBilde");
            let main = document.getElementById("main");


            //large url
            let bildeurler = database.ref("bildeurler");

            function largeURL(snap) {
                let url = snap.downloadURL;
                bildeurler.push(url);
            }

            function lastOppBilde() {
                let bilde = this.files[0];
                //date
                let bildenavn = storage.ref("minefinebilder/" + new Date());
                bildenavn.put(bilde).then(largeURL);

                console.log("its uploaded");
            }

            function visBilder(snap) {
                let url = snap.val();

                //html dom
                main.innerHTML += `
                    <img src="${url}">
                `;
                console.log("its here");
            }
            inpBilde.onchange = lastOppBilde;

            bildeurler.on("child_added", visBilder);
        </script>
    </main>
</body>

</html>
